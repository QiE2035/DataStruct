# 栈的应用-括号匹配

## 一、实验目的及要求

### 目的

选择合适的数据结构，采用顺序或链接存储结构设计和开发程序，实现栈的初始化、入栈、出栈等基本算法。能够利用栈解决工程中的后进先出应用问题，提高学生的计算机应用能力。
要求：

1. 写出完整的程序，编译并执行得到正确的结果。程序实现内容如下
    - [x] 定义栈的数据类型；
    - [x] 定义栈的初始化算法；
    - [x] 定义栈的判空算法；
    - [x] 定义出栈算法；
    - [x] 定义入栈算法；
    - [x] 定义取栈顶元素算法；
    - [x] 调用栈的基本运算实现括号匹配的算法。
2. 选用自己熟悉的C语言开发工具。
3. 设计算法，上机调试、运行和测试程序，写出程序的测试数据和运行结果，并进行分析。
4. 编写实验报告。

## 五、实验原理

算术表达式中括号匹配的检查是栈的典型应用实例。假设表达式中只允许出现两种括号：方扩号和圆括号，这两种扩号可以嵌套，但必须是成对出现。例如 `[ [ ()  () ] ]`或`[ ()  [ ] ]`等是正确的格式，而`[ ] ([)` 或 `([ (][ ]) )` 等是不正确的格式。

上面的括号序列`[ [ ()  () ] ]`在依次输入前三个左括号时因为全是左括号都不可能得到匹配，但当遇到第一个 “`)`”时需要与第三个输入的“`(`”匹配，而第二个“`)`”要与它前面刚刚输入的“`(`”匹配，第一个“`]`”要与第二个输入的“`[`”匹配，而第二个“`]`”要与第一个输入的“`[`”匹配。可以看出，右括号与左括号匹配时，后输入的左括号最先得到匹配，这正好与栈的性质相吻合，因此，可以用栈来实现括号匹配的检查。

括号不匹配的情况可能有三种：

1. 刚到来的右括弧不是所“期待”的，如需要匹配的是“`(`”，而到来的却是“`]`”；
2. 到来的右括弧已经没有与之匹配的左括号，这种情况说明右括号多了，而左括号却少了；
3. 直到结束，也没有到来所“期待”的右括弧，这种情况说明左括号有多余的，缺少右括号。

用栈来实现括号匹配检查的原则是，对表达式从左到右扫描。

1. 当遇到左括号时，左括号入栈；
2. 当遇到右括号时，首先检查栈是否空，若栈空，则表明该“右括弧”多余；否则比较栈顶左括号是否与当前右括号匹配，若匹配，将栈顶左括号出栈，继续操作；否则，表明不匹配，停止操作。
3. 当表达式全部扫描完毕，若栈为空，说明括号匹配，否则表明“左括弧”有多余的。

当然，括号匹配检查也可以延伸到任何成对出现的定界符，例如引号、书名号等。对于出现在这些成对的定界符之间的符号在算法实现时只要跳过即可。

1. 包含的头文件

    ```c
    #include <stdio.h>
    #include <stdlib.h> 
    ```

2. 栈结构体的定义 (顺序栈或链栈都可)

    ```c
    typedef char DataType; //栈中的数据元素类型为char
    typedef struct
    {
        DataType data[MAXSIZE];
        int top;
    } SeqStack; //顺序栈的定义

    typedef char DataType;
    typedef struct Node
    {
        DataType data;
        struct Node *next;
    } LinkStack; //链栈的定义
    ```

3. 栈的基本运算

    ```c
    //顺序栈
    SeqStack *initSeqStack();          //初始化栈
    int empty(SeqStack *s);            //判空
    int push(SeqStack *s, DataType x); //压栈
    void pop(SeqStack *s);             //出栈
    DataTypeS top(SeqStack *s);        //取栈顶
    //链栈
    LinkStack *initLinkStack();                //
    int empty(LinkStack *s);                   //
    LinkStack *push(LinkStack *s, DataType x); //
    LinkStack *pop(LinkStack *s);              //
    DataType top(LinkStack *s);
    ```

## 六、实验步骤及内容

1. 设计栈的数据类型，栈的存储结构可以是顺序栈或链栈。
2. 将栈的运算及括号匹配函数合理结合，实现括号匹配的运算。
3. 上机调试、运行和测试程序。
4. 编写实验报告，要求包括数据结构，程序源码，写出程序的测试数据和运行结果，并进行总结分析。

## 七、思考问题

- [x] 尝试使用更多种类的括号进行匹配检验。
- [x] 尝试将检测的字符串或者字符数组保存在文件中，从文件中读取检测数据，并判断表达式中的括号是否匹配。
